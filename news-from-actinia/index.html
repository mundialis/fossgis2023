<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1024" />
    <title>News von actinia</title>
    <link rel="shortcut icon" href="resources/img/mundialis_bildmarke_web.ico" type="image/x-icon">
    <link href="css/impress-common.css" rel="stylesheet" />
    <link rel="stylesheet" href="resources/extras/highlight/styles/github.css">
    <link rel="stylesheet" href="resources/extras/mermaid/mermaid.css">
    <link rel="stylesheet" href="css/index.css">
</head>
<body class="impress-not-supported">
<div class="fallback-message">
    <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>
    <p>For the best experience please use the latest <b>Brave</b>, <b>Firefox</b> or <b>Chromium</b> browser.</p>
</div>

<div id="impress">

<!-- WELCOME ###########################################################################-->
<div id="welcome" class="step slide" data-x="0" data-y="0" data-scale="50" data-z="1">
<h1>News von actinia</h1>
<p id="header-stamp">actinia wurde ein </br>OSGeo community</br>Projekt in 2019!</p>
<img src="resources/img/actinia-icon.svg" alt="Logo actinia" id="welcome-actinia-header"/>
<hr>
<h3><img src="resources/img/mundialis_bildmarke_web.ico" alt="Logo mundialis" id="welcome-mundialis"/></h3>
<h3>FOSSGIS 2023 Berlin</h3>
<h3 class="vol1">Vol. 2</h3>
<hr>

<div class="content">

<div class="side-column side-column-left">
<h4>Zuvor über actinia</h4>
<a href="https://mundialis.github.io/fossgis2020/grass-gis-in-the-cloud-actinia-geoprocessing/index.html">
<img src="resources/img/actinia-intro-de/1.svg"></a>
<hr>
<h4>Neue Features</h4>
<p>Keycloak Anbindung<img class="icon" src="resources/img/circle.png">
Parallel Plugin<img class="icon" src="resources/img/circle.png">
Zwischenergebnisse speichern bei Fehler<img class="icon" src="resources/img/circle.png">Tiling Plugin
<img class="icon" src="resources/img/circle.png">
Verbesserungen der Job Queue<img class="icon" src="resources/img/circle.png">
GitHub Organisation Umzug<img class="icon" src="resources/img/circle.png">
Project Board<img class="icon" src="resources/img/circle.png">
...</p>
<hr>
</div>

<div class="center">
<div><img src="resources/img/berlin-8A1104-tiny.jpeg"></div>
<h4><a href="https://github.com/mundialis/actinia_core/releases/tag/4.0.0">actinia 4.0.0 released!</a></h4>
<p>
[4.7.1] - 2023-02-09 | [4.7.0] - 2023-01-25 | [4.6.0] - 2022-12-17 | [4.5.0] - 2022-12-14 | [4.4.0] - 2022-11-22 | [4.3.1] - 2022-10-21 | [4.3.0] - 2022-09-22 | [4.2.1] - 2022-08-05 | [4.2.0] - 2022-08-03 | [4.1.0] - 2022-07-20 | [4.0.1] - 2022-05-20 | <b>[4.0.0] - 2022-04-01</b> | [3.2.0] - 2022-03-23 | [3.1.3] - 2022-03-11 | [3.1.2] - 2022-02-23 | [3.1.1] - 2022-02-03
</br></br></br>
<b>[4.0.0] - 2022-04-01</b></br>
</br>### Changed
</br>
* Refactor rest by @mmacata in #320
</br>
* Refactor rest - part 2 by @mmacata in #322
</br>
* Move apidocs by @anikaweinmann in #337
</br>
</br>
This is a major release because it breaks the actinia python API. Plugins were already adjusted accordingly. The HTTP REST API is not affected and moved (with this release completely) to [actinia-api](https://github.com/mundialis/actinia-api).
</p>
</div>

<div class="side-column side-column-right">
<h4>Verwandt</h4>
<p>actinia plugins<img class="icon" src="resources/img/circle.png">
Installations-varianten<img class="icon" src="resources/img/circle.png">
actinia clients
</p>
<hr>
<h4>Neue Beitragende</h4>
<p>@linakrisztian</br>@ninsbl</br>@Momen-Mawad</p>
<hr>
</div>
</div>
</div>

<!-- MUNDIALIS ###########################################################################-->
<div id="mundialis" class="step slide" data-x="31000" data-y="18700" data-scale="5" data-z="10">
<h2>mundialis GmbH & Co. KG</h2>
<table id="ma">
<tr>
<td><div class="table-img"><img src="resources/img/MA/IMG_6750_4.jpg"></div></td>
<td><div class="table-img"><img src="resources/img/MA/JoHempel_202010_Mundialis_Loki.jpg"></div></td>
<td><div class="table-img"><img src="resources/img/MA/JoHempel_201709_Mundialis_MN.jpg"></div></td>
<td><div class="table-img"><img src="resources/img/MA/JoHempel_201709_Mundialis_HP.jpg"></div></td>
</tr>
<tr>
<td><div class="table-img"><img src="resources/img/MA/JoHempel_201709_Mundialis_CT.jpg"></div></td>
<td><div class="table-img"><img src="resources/img/MA/JoHempel_201803_Mundialis_AW.jpg"></div></td>
<td><div class="table-img"><img src="resources/img/MA/JULI0220_JH_Zuschnitt_kl.jpg"></td>
<td><div class="table-img"><img src="resources/img/MA/FotoTreppeLina_cut-1.jpg"></div></td>
</tr>
<tr>
<td><div class="table-img"><img src="resources/img/MA/JULI0187_MMA_Zuschnitt_kl.jpg"></div></td>
<td><div class="table-img"><img src="resources/img/MA/JoHempel_202010_Mundialis_GR.jpg"></div></td>
<td><div class="table-img"><img src="resources/img/MA/JoHempel_201803_Mundialis_MM.jpg"></div></td>
<td><div class="table-img"><img src="resources/img/MA/JoHempel_201709_Mundialis_JO.jpg"></div></td>
</tr>
</table>
</div>

<!-- ZOOM ###########################################################################-->

<div class="step slide" data-x="0" data-y="0" data-scale="50">
</div>

<!-- INTRO ###########################################################################-->
<div id="actinia-intro1" class="step slide" data-x="-25400" data-y="-50" data-scale="14">
<a href="https://mundialis.github.io/fossgis2020/grass-gis-in-the-cloud-actinia-geoprocessing/index.html">
<img src="resources/img/actinia-intro-de/1.svg"></a>
</div>
<div id="actinia-intro2" class="step slide actinia-intro" data-rel-x="-2300" data-rel-y="-1200">
<img src="resources/img/actinia-intro/2_grass.svg">
</div>
<div id="actinia-intro3" class="step slide actinia-intro" data-rel-x="0" data-rel-y="0">
<img src="resources/img/actinia-intro/3_grass.svg">
</div>
<div id="actinia-intro4" class="step slide actinia-intro" data-rel-x="1400" data-rel-y="-500">
<img src="resources/img/actinia-intro-de/4_rest.svg">
</div>
<div id="actinia-intro5" class="step slide actinia-intro" data-rel-x="0" data-rel-y="0">
<img src="resources/img/actinia-intro/5_cloud.svg">
</div>
<div id="actinia-intro6" class="step slide actinia-intro" data-rel-x="1400" data-rel-y="-200">
<img src="resources/img/actinia-intro/6_example.svg">
</div>
<div id="actinia-intro7" class="step slide actinia-intro" data-rel-x="0" data-rel-y="0">
<img src="resources/img/actinia-intro/7_example.svg">
</div>
<div id="actinia-intro8" class="step slide actinia-intro" data-rel-x="0" data-rel-y="0">
<img src="resources/img/actinia-intro-de/8_example.svg">
</div>

<div class="step slide" data-x="0" data-y="0" data-scale="50">
</div>

<!-- FEATURES ###########################################################################-->
<div id="features" class="step slide" data-x="130100" data-y="0" data-scale="100" data-z="1">
<div class="vl"></div>
<div class="left">
<p class="features-header-left">2 | Features</p>
<p class="features-header-right">News von actinia</p>
<img src="resources/img/actinia-icon.svg" alt="Logo actinia" id="welcome-actinia-header"/>
<hr>
</div>
<div class="right">
<p class="features-header-left">FOSSGIS 2023 Berlin</p>
<p class="features-header-right">Vol. 2</p>
<hr>
</div>
</div>

<!-- FEATURES COLUMN 1 #######################################################################-->
<div id="keycloak-1" class="step slide markdown features" data-rel-x="-58000" data-rel-y="-32000" data-scale="18">
##### Keycloak Anbindung
- actinia enthält ein eigenes User Management inklusive Authentifizierung
- Identitäts- und Zugangsmanagement jetzt auch mit Keycloak möglich
- in Keycloak wird eine Client-Konfiguration mit actinia Rollen und Gruppen konfiguriert, sowie actinia spezifische Attribute

__von @anikaweinmann in [#381](https://github.com/mundialis/actinia_core/pull/381) [4.5.0]__

![actinia-client](resources/img/actinia-client.png)
</div>

<div id="keycloak-2" class="step slide markdown plugin features" data-rel-x="0" data-rel-y="0" data-scale="18">
##### Keycloak Anbindung
- Um die Keycloak Nutzung in actinia zu konfigurieren, ist nur das Keycloak OIDC json notwendig - keine Admin Zugangsdaten
- Deshalb sind wenige Features von actinia nicht verfügbar, wenn Keycloak verwendet wird (Auflistung aller Nutzer, Erstellung und Löschung eines Nutzers)

__von @anikaweinmann in [#381](https://github.com/mundialis/actinia_core/pull/381) [4.5.0]__

![actinia-client](resources/img/keycloak-config.png)
</div>

<!-- FEATURES COLUMN 1 #######################################################################-->

<div id="interim" class="step slide markdown features" data-rel-x="0" data-rel-y="20000" data-scale="18">
##### Zwischenergebnisse speichern bei Fehler

* Bisher konnten Zwischenergebnisse nach jeden Schritt gespeichert werden
* Vorteil: Wiederaufnahme nach Fehler
* Nachteil: benötigt bei großen Datenmengen viel Speicherplatz und verlangsamt Berechnung, da die Daten nach jedem Schritt synchronisiert werden

* __Mittelweg: nur bei Fehler werden Zwischenergebnisse gespeichert__
  * Auch ohne Angabe neuer Prozesskette möglich in #400 [4.6.0]
  * Alternativ Manipulation der alten Prozesskette ab nach dem Fehler
  * Beinhaltet TGIS (Zeitreihen) Zusammenführung in #413 [4.7.1] und Raster VRT Unterstützung in #410 [4.7.0]
  * Optionales Hinzufügen zusätzlicher Mapsets in #399 [4.5.0]

__von @anikaweinmann in 413 [4.7.1], 410 [4.7.0], 400 [4.6.0], 399 [4.5.0], 390 [4.4.0]__

</div>

<div id="queue" class="step slide features" data-rel-x="0" data-rel-y="18000" data-scale="18">
<h5>Aufteilung von actinia in Manager und Worker</h5>
<div class="mermaid">
graph TD;
    manager(actinia manager)
    worker(actinia worker)
    redis(redis<br>job queue + resources);

    manager --> redis;
    worker --> redis;
</div>
<b>Queue</b>
<ul>
    <li>Nutzung einer Job Queue in redis</li>
    <li>Nutzung einer separaten Queue per job in #355 [4.1.0]</li>
    <li>Trotzdem Nutzung der lokalen Queue für synchrone Anfragen in #361 [4.2.0]</li>
    <li>Rückgabe des Queue Namens in der actinia Antwort in #380 [4.3.0]</li>
</ul>
<b>Worker</b>
<ul>
    <li>Übergabe des Queue Namens bei Job Start</li>
    <li>Beenden des Workers, wenn die Queue leer ist in #358 [4.2.0]</li>
</ul>

<b>von @mmacata in 380 [4.3.0], 358 [4.2.0], 361 [4.2.0], 355 [4.1.0], 304 [3.2.0], 355 [4.1.0]</b>
</div>

<!-- FEATURES COLUMN 2 #######################################################################-->
<div id="gh1" class="step slide markdown features" data-x="112000" data-y="-25000" data-scale="27">
##### Umzug der GitHub Organisation

![GitHub organisation overview](resources/img/GH-orga.jpeg)
</div>
<div id="gh2" class="step slide markdown features" data-rel-x="0" data-rel-y="25000" data-scale="27">

##### Projekt Board

[jetzt auf GitHub](https://github.com/orgs/mundialis/projects/1/views/5)
![GitHub project board](resources/img/GH-project-board.jpeg)
</div>


<div id="kleinanzeigen" class="step slide" data-rel-x="-10000" data-rel-y="35000" data-scale="35">

<h5>Weitere Neuigkeiten, Features, Verbesserungen</h5>
<hr>
<p>Resource storage older than X days deletion by @anikaweinmann in <a href="https://github.com/mundialis/actinia_core/pull/392">#392</a> [4.4.0]
</p>
<hr>
<p>Replace deprecated (Timed)JSONWebSignatureSerializer by @metzm in <a href="https://github.com/mundialis/actinia_core/pull/386">#386</a> [4.4.0] - <b>!! Old API keys and tokens might not be valid anymore !!</b></p>
<hr>
<p>Allow users to create and delete mapsets by @juleshaas and @anikaweinmann in <a href="https://github.com/mundialis/actinia_core/pull/374">#374</a> [4.2.1]
</p>
<hr>
<p><b>Endpoint configuration</b> by @anikaweinmann in <a href="https://github.com/mundialis/actinia_core/pull/357">#357</a> [4.1.0]
</p>
<hr>
<p>Add more modules and configuration to add additinal modules in config by @anikaweinmann in <a href="https://github.com/mundialis/actinia_core/pull/341">#341</a> [4.0.1]</p>
<hr>
<p><b>Update to GRASS GIS 8</b> by @neteler in [4.0.1]</p>
<hr>
<p>Update alpine in docker by @mmacata in <a href="https://github.com/mundialis/actinia_core/pull/343">#343</a> and <a href"https://github.com/mundialis/actinia_core/pull/346">#346</a> in [4.0.1]</p></p>
<hr>
<p>Refactor REST endpoints by @mmacata in <a href="https://github.com/mundialis/actinia_core/pull/320">#320</a> and <a href="https://github.com/mundialis/actinia_core/pull/322">#322</a> in [4.0.0]</p>
<hr>
<p><b>Move apidocs</b> by @anikaweinmann in <a href="https://github.com/mundialis/actinia_core/pull/337">#337</a> [4.0.0] - This is a major release because it breaks the actinia python API. Plugins were already adjusted accordingly. The HTTP REST API is not affected and moved (with this release completely) to [actinia-api](https://github.com/mundialis/actinia-api).
</p>
<hr>
<p>Importer resampling and resolution by @juleshaas in <a href="https://github.com/mundialis/actinia_core/pull/298">#298</a> [3.2.0]</p>
<hr>
<p>More secure path mangling by @marcjansen in <a href="https://github.com/mundialis/actinia_core/pull/281">#281</a> [4.5.0]</p>
<hr>
<p>Add pipeline to add python wheel to release assets by @mmacata in <a href="https://github.com/mundialis/actinia_core/pull/313">#313</a> [3.1.2]</p>
<hr>
<p><b>Black by @anikaweinmann in <a href="https://github.com/mundialis/actinia_core/pull/378">#378</a> [4.3.0]
</b></p>
<hr>

<p>Qualitätsverbesserungen (Verbesserung der Tests, lint / black, Dev Setup), verbesserte Documentation, Tutorial, Release documentation</p>
<hr>
<p>allow character "&" for t.rast.bandcalc by @metzm in <a href="https://github.com/mundialis/actinia_core/pull/351">#351</a> [4.0.1]</p>
<hr>
<p>adapt s2 importer to work without Google BigQuery by @griembauer in <a href="https://github.com/mundialis/actinia_core/pull/295">#295</a> [3.2.0]</p>
</div>



<!-- FEATURES COLUMN 3 (PAGE 2)#######################################################################-->
<div class="step slide overview features" data-x="130100" data-y="0" data-scale="100" data-z="1">
</div>

<div id="plugins-1" class="step slide features" data-x="148100" data-y="-29000" data-scale="20">
<h5>Plugins für die Parallelisierung:<br> actinia-parallel-plugin und actinia-tiling-plugin</h5>
<div class="mermaid">
graph LR

    subgraph actinia-tiling-plugin
    reg(computational region)
    tile1(tile_01)
    tile2(tile_02)
    tile3(tile_03)
    end
    subgraph actinia-parallel-plugin
    comp1(brightness_01)
    comp2(brightness_02)
    comp3(brightness_03)
    end
    subgraph actinia-tiling-plugin
    reg(computational region)
    comp(brightness)
    end

    reg --> tile1
    reg -- tiling computational region into tiles --> tile2
    reg --> tile3
    tile1 --> comp1
    tile2 -- computing parallel on the tiles --> comp2
    tile3 --> comp3
    comp1 --> comp
    comp2 -- merging brightness tiles together--> comp
    comp3 --> comp
</div>
<ul>
    <li>actinia-tiling-plugin erzeugt automatisiert Kacheln</li>
    <li>actinia-parallel-plugin prozessiert parallel auf den Kacheln</li>
    <li>actinia-tiling-plugin fügt die Kacheln wieder zusammen</li>
</ul>
</div>

<div id="plugins-2" class="step slide markdown plugin features largecode" data-rel-x="0" data-rel-y="0" data-scale="20">
##### Plugins für die Parallelisierung 1: Tiling
Das [actinia-tiling-plugin](https://github.com/mundialis/actinia-tiling-plugin) erzeugt Kacheln für eine Computational Region

    actinia_base_url=http://localhost:8088/api/v3
    mapset_url=${actinia_base_url}/locations/loc_25832/mapsets/tiling_usermapset
    auth="actinia-gdi:actinia-gdi"

    # create tiling grid
    curl -u ${auth} -X GET ${mapset_url}/vector_layers | jq
    json=grid_tiling_pb.json
    curl -u ${auth} -X POST ${mapset_url}/tiling_processes/grid \
        -H 'accept: application/json' -H 'Content-Type: application/json' \
        -d @${json} | jq
    curl -u ${auth} -X GET ${mapset_url}/vector_layers | jq

Mit `grid_tiling_pb.json`:

    {
      "width": "4000",
      "height": "4000",
      "grid_prefix": "grid"
    }
</div>

<div id="plugins-3" class="step slide markdown plugin features" data-rel-x="0" data-rel-y="0" data-scale="20">
##### Plugins für die Parallelisierung 2: Prozessierung
Das [actinia-parallel-plugin](https://github.com/mundialis/actinia-parallel-plugin) rechnet parallel.
Der Status von jedem einzelnen Job kann individuell abgefragt werden, oder zusammengefasst im Batch Job.

    curl -u ${auth} -X POST -H 'Content-Type: application/json' \
        -d @parallel_processing.json \
        ${actinia_base_url}/locations/nc_spm_08_grass7_root/processing_parallel | jq

Mit `parallel_processing.json`:

    {
        "jobs": [
        {
            "list": [{
                "module": "g.region",
                "id": "parallel_region_1",
                "inputs":[{"param": "vector", "value": "tile_01@tiling_usermapset"}]
            },{
                "module": "r.mapcalc",
                "id": "r_mapcalc_1",
                "inputs":[{"param": "expression", "value": "brightness = lsat5_1987_10@landsat + lsat5_1987_20@landsat + lsat5_1987_30@landsat"}]
            }],
            "parallel": "true",
            "version": "1"
        },
        {
            "list": [{
                "module": "g.region",
                "id": "parallel_region_2",
                "inputs":[{"param": "vector", "value": "tile_02@tiling_usermapset"}]
            },{
                "module": "r.mapcalc",
                "id": "r_mapcalc_2",
                "inputs":[{"param": "expression", "value": "brightness = lsat5_1987_10@landsat + lsat5_1987_20@landsat + lsat5_1987_30@landsat"}]
            }],
            "parallel": "true",
            "version": "1"
        },
        {
            "list": [{
                "module": "g.region",
                "id": "parallel_region_3",
                "inputs":[{"param": "vector", "value": "tile_03@tiling_usermapset"}]
            },{
                "module": "r.mapcalc",
                "id": "r_mapcalc_3",
                "inputs":[{"param": "expression", "value": "brightness = lsat5_1987_10@landsat + lsat5_1987_20@landsat + lsat5_1987_30@landsat"}]
            }],
            "parallel": "true",
            "version": "1"
        }
        ]
    }
</div>

<div id="plugins-4" class="step slide markdown plugin features largecode" data-rel-x="0" data-rel-y="0" data-scale="20">
##### Plugins für die Parallelisierung 3: Merging
Das [actinia-tiling-plugin](https://github.com/mundialis/actinia-tiling-plugin) fügt Vektor- und Rasterkarten in diesen Kacheln wieder zusammen

    actinia_base_url=http://localhost:8088/api/v3
    mapset_url=${actinia_base_url}/locations/loc_25832/mapsets/tiling_usermapset
    auth="actinia-gdi:actinia-gdi"

    json=patch_merge.json
    curl -u ${auth} -X POST ${mapset_url}/merge_processes/patch \
        -H 'accept: application/json' -H 'Content-Type: application/json' -d @${json} | jq
    curl -u ${auth} -X GET ${mapset_url}/raster_layers | jq

Mit `patch_merge.json`:

    {
        "mapsetlist": ["tiling_usermapset_tmp1", "tiling_usermapset_tmp2", "tiling_usermapset_tmp3"],
        "outputs":[
        {"param": "raster", "value": "brightness"}
        ],
        "keep_mapsets": false
    }
</div>

<div id="plugins-5" class="step slide markdown plugin features" data-rel-x="0" data-rel-y="0" data-scale="20">
##### Plugins für die Parallelisierung: Was fehlt noch, um die Plugins kombinieren zu können?
- actinia-parallel-plugin
    - Flüchtiges (ephemeral) Prozessieren:
      - Export
      - Unterstützung von stdout/export für den nächsten Schritt
    - Persistentes Prozessieren
- actinia-tiling-plugin
    - Integration in das actinia-parallel-plugin, um automatisch Kacheln zu erzeugen und die Ergebnisse am Ende wieder zusammenzufügen
</div>

<div id="plugins-all" class="step slide features" data-rel-x="0" data-rel-y="20000" data-scale="20">
<h5>Übersicht über Komponenten und Plugins</h5>

<ul>
<li><a href="https://github.com/actinia-org/actinia-core">actinia-core</a></li>
<li><a href="https://github.com/actinia-org/actinia-api/">actinia-api</a></li>
<li><a href="https://github.com/actinia-org/actinia-docker/">actinia-docker</a></li>
<br>
<li><a href="https://github.com/actinia-org/actinia-parallel-plugin/">actinia-parallel-plugin</a></li>
<li><a href="https://github.com/actinia-org/actinia-tiling-plugin/">actinia-tiling-plugin</a></li>
<li><a href="https://github.com/actinia-org/actinia-stac-plugin/">actinia-stac-plugin</a></li>
<li><a href="https://github.com/actinia-org/actinia-module-plugin/">actinia-module-plugin</a></li>
<li><a href="https://github.com/actinia-org/actinia-metadata-plugin">actinia-metadata-plugin</a></li>
<li><a href="https://github.com/actinia-org/actinia-satellite-plugin/">actinia-satellite-plugin</a></li>
<li><a href="https://github.com/actinia-org/actinia-statistic-plugin/">actinia-statistic-plugin</a></li>
<br>
<li><a href="https://github.com/actinia-org/actinia-example-plugin/">actinia-example-plugin</a></li>
<br>
<li><a href="https://github.com/Open-EO/openeo-grassgis-driver">openeo-grassgis-drives</a></li>
</ul>

</div>

<div id="stac-1" class="step slide markdown features" data-rel-x="1000" data-rel-y="-2500" data-scale="7">
##### actinia-stac-plugin
![actinia-stac-plugin](resources/img/actinia-stac-plugin.jpeg)

- Über das Plugin wird actinia selbst zu einem STAC
- Vorhandene __Collections__ können geharvested werden,
    - um als __Input Datensatz für actinia gelistet__ werden zu können
    - um __in Prozessierungen verwendet__ werden zu können
- Bisher wurden zwei Ressourcen implementiert:
    - `/instances`: Virtueller Raum, in dem Collections gespeichert werden können. Eine Instanz ist dabei immer eine STAC Instanz, von der geharvested wird
    - `/collections`: Gehören immer zu einer Instanz.
    Da zwei Instanzen die gleiche Collection enthalten können, wird eine interne ID zugeordnet:
    `stac.{{ stac_instance_id }}.rastercube.{{ stac_collection_id }}`
</div>

<div id="stac-2" class="step slide markdown features largecode" data-rel-x="0" data-rel-y="0" data-scale="7">
##### actinia STAC importer
Nutzung der gespeicherten Collections in Prozessketten

    {
        "list": [{
            "id": "importer_1",
            "module": "importer",
            "inputs": [{
                "import_descr": {
                    "source": "stac.defaultStac.rastercube.landsat-8-l1-c1",
                    "type": "stac",
                    "semantic_label": "B1",
                    "extent": {
                        "spatial": {
                            "bbox": [[30.192, -16.369, 42.834, -0.264]]
                        },
                        "temporal":{
                            "interval": [["2021-09-09", "2021-09-12"]]
                        }
                    },
                    "filter": {}
                },
                "param": "map",
                "value": "example-red"
            }
            ]
        }],
        "version": 1
    }


    $ curl -u $user:$pw -d @test -H 'Content-Type: application/json' \
        https://actinia-dev.mundialis.de/api/v3/locations/nc_spm_08/processing_async_export

</div>

<div id="stac-3" class="step slide markdown features largecode" data-rel-x="0" data-rel-y="0" data-scale="7">
##### actinia STAC exporter
Erzeugung eines STAC Items für eine Ergebnis-Rasterkarte, Instanz gleich Nutzername

    {
        "list": [
            {
                "module": "r.slope.aspect",
                ...
                "outputs": [
                    {
                        "param": "slope",
                        "value": "elevation",
                        "export": {
                            "format": "GTiff",
                            "type": "raster"
                        },
                        "metadata":{
                            "format": "STAC"
                        }
                    }
                ]
            }
        ],
        "version": "1"
    }
</div>

<div id="module-1" class="step slide features features-elements-inline" data-rel-x="0" data-rel-y="7000" data-scale="7">

<h5>actinia-module-plugin: template management</h5>
<div class="left">
<p>Beispiel Prozesskette</p><hr>
<pre><code>
{
    "list": [
        {
            "module": "g.region",
            "id": "g.region_1",
            "inputs": [
                {
                    "param": "raster",
                    "value": "elevation"
                },
                {
                    "param": "res",
                    "value": "10"
                }
            ],
            "flags": "p"
        },
        {
            "module": "r.slope.aspect",
            "id": "r.slope.aspect_1",
            "inputs": [
                {
                    "param": "elevation",
                    "value": "elevation"
                },
                {
                    "param": "format",
                    "value": "degrees"
                },
                {
                    "param": "precision",
                    "value": "FCELL"
                },
                {
                    "param": "zscale",
                    "value": "1.0"
                }
            ],
            "outputs": [
                {
                    "export": {
                        "format": "GTiff",
                        "type": "raster"
                    },
                    "param": "slope",
                    "value": "elevation_myslope"
                }
            ],
            "flags": "a"
        }
    ],
    "version": "1"
}
</code></pre>
</div>
<div class="right">
<p>Prozessketten-Template</p>
<pre><code>
{
    "id": "elevation_demo",
    "description": "Demo of pc templates",
    "template": {
        "list": [
            {
                "flags": "p",
                "id": "g.region_1",
                "inputs": [{
                    "param": "raster",
                    "value": "{{ elevation_map }}"
                },
                {
                    "param": "res",
                    "value": "10"
                }
            ],
            "module": "g.region"
            }, {
                "module": "r.slope.aspect",
                "id": "r.slope.aspect_1",
                "inputs": [
                    {
                        "param": "elevation",
                        "value": "{{ elevation_map }}"
                    },
                    {
                        "param": "format",
                        "value": "degrees"
                    },
                    {
                        "param": "precision",
                        "value": "FCELL"
                    },
                    {
                        "param": "zscale",
                        "value": "1.0"
                    }
                ],
                "outputs": [
                    {
                        "export": {
                            "format": "GTiff",
                            "type": "raster"
                        },
                        "param": "slope",
                        "value": "{{ elevation_map }}_myslope"
                    }
                ],
                "flags": "a"
            }
        ],
        "version": "1"
    }
}
</code></pre>
</div>
</div>

<div id="module-2" class="step slide markdown features features-elements-inline largecode" data-rel-x="0" data-rel-y="0" data-scale="7">
##### actinia-module-plugin template management

Das Template wird in actinia gespeichert und kann nun wiederum als Prozess aufgerufen werden:

        {
            "list": [
                {
                    "module": "elevation_demo",
                    "id": "elevation_demo_1",
                    "inputs": [
                        {
                            "param": "elevation_map",
                            "value": "elevation"
                        }
                    ]
                }
            ],
            "version": "1"
        }


    BASE_URL="https://actinia-dev.mundialis.de/api/v1/locations/nc_spm_08/mapsets/fossgis_demo"

    curl -u XXX -X POST -H "Content-Type: application/json" -d "${JSON}" \
        $BASE_URL/processing
    curl -u XXX -X GET $BASE_URL/raster_layers/elevation_myslope/render > myslope.tiff

![raster slope map](resources/img/myslope.tiff)

</div>

<div class="step slide overview features" data-x="130100" data-y="0" data-scale="100" data-z="1">
</div>

<!-- FEATURES COLUMN 4 (PAGE 2)#######################################################################-->
<div id="clients-1" class="step slide markdown features pre-large features-elements-inline" data-x="185100" data-y="-29000" data-scale="20">
##### actinia clients: actinia QGIS Plugin
![actinia QGIS client](resources/img/ac_03_raster_management.jpg)
</div>

<div id="clients-2" class="step slide markdown features features-elements-inline pre-large" data-rel-x="0" data-rel-y="20000" data-scale="20">
##### actinia clients - ace - actinia command execution
![ACE script example](resources/img/ace-script-example.jpeg)
</div>

<div id="clients-3" class="step slide markdown features largecode" data-rel-x="0" data-rel-y="22000" data-scale="20">
##### actinia clients - actinia-python-client

    from actinia import Actinia

    actinia_mundialis = Actinia()
    actinia_mundialis.get_version()
    actinia_mundialis.set_authentication("myuser", "mypw")

    pc = {
        "list": [
            {
                "id": "r_mapcalc",
                "module": "r.mapcalc",
                "inputs": [
                    {
                        "param": "expression",
                        "value": "baum=5"
                    }
                ]
            }
        ],
        "version": "1"
    }
    job = actinia_mundialis.locations["nc_spm_08"].create_processing_export_job(pc, "test")
    job.poll_until_finished()

    print(job.status)
    print(job.message)
</div>

<div id="clients-4" class="step slide markdown features pre-large features-elements-inline" data-rel-x="0" data-rel-y="20000" data-scale="20">
##### actinia clients: jupyter notebooks + leafmap
[https://github.com/actinia-org/actinia-jupyter](https://github.com/actinia-org/actinia-jupyter)
![actinia leafmap](resources/img/leafmap_incora.jpg)
</div>


<!-- BOTTOM (PAGE 2) #######################################################################-->
<div class="step slide overview" data-x="130100" data-y="0" data-scale="100" data-z="1">
</div>

<div id="install-1" class="step slide markdown features" data-x="143100" data-y="10000" data-scale="10">
##### Installationsvarianten - Einfachste Installation
- einfache actinia Installation mit redis Datenbank
- Ein paar Prozesse können in einer einfachen Installation parallel laufen
- Nur nutzbar, wenn keine ressourcenintensiven Prozesse erwartet werden
- Nutzt nicht das volle Potential von actinia
![actinia and GRASS GIS](resources/img/actinia-grass.svg)
![redis logo](resources/img/Redis_Logo.svg)
</div>

<div id="install-2" class="step slide" data-rel-x="0" data-rel-y="10000" data-scale="10">
<h5> Installationsvarianten - Gleichberechtigte Pods</h5>
<img class="install-cloud" src="resources/img/5_cloud.svg"/>
<img class="install-load" src="resources/img/6_cloud_abstract.svg"/>
</div>

<div id="install-3" class="step slide" data-rel-x="0" data-rel-y="10000" data-scale="10">
<h5> Installationsvarianten - HPC Deployment</h5>
<div class="mermaid">
graph TD
    DS(Data Storage - DS)

    subgraph Compute-Cloud
    subgraph actinia-VM
    DS1(DS)
    manager(<b>actinia manager</b>)
    keycloak(<b>Keycloak</b>)
    postgres(Postgres)
    end
    subgraph redis-VM
    redis(<b>redis<br>job queue + resources</b>)
    end
    end

    subgraph HPC
    subgraph login-node
    DS2(DS)
    end
    subgraph compute-node
    DS3(DS)
    worker(<b>actinia worker</b>)
    end
    end

    manager --> redis
    worker --> redis
    manager --> keycloak
    keycloak --> postgres
    DS -- mount --> DS1
    DS -- mount --> DS2
    DS -- mount --> DS3
    DS1 -- mount --> manager
    DS2 -- slurm --> worker
    DS3 -- mount --> worker

    subgraph Legend
    docker
    charliecloud
    mount
    end

    classDef docker fill:#df65b0;
    class docker,manager,keycloak,postgres,redis docker;
    classDef charliecloud fill:#e9a3c9;
    class charliecloud,worker charliecloud;
    classDef ds fill:#a1d76a;
    class mount,DS,DS1,DS2,DS3 ds;
</div>
</div>

<div class="step slide overview features" data-x="130100" data-y="0" data-scale="100" data-z="1">
</div>
<!-- OUTLOOK #######################################################################-->
<div id="outlook" class="step slide features" data-x="160100" data-y="40000" data-scale="10">
<h2>Ausblick</h2>
<hr>

<div class="left">
<h4>Upcoming 2022</h4>
<ul><li>STAC Integration (bereits in Arbeit) CHECK</li>
<li>Benutzerauthentifizierung über Keycloak CHECK</li>
<li>Module thematisch umstrukturieren WIP</li>
<li>Aufteilung des Codes in Auftragsempfänger und Auftragsausführer CHECK</li>
<li>Automatisierte Paralellisierung WIP</li>
<li>Auslagerung der kompletten API docs / docker builds in eigentständige Repositories CHECK</li>
<li>...</li>
</ul>
</div>

<div class="right">
<h4>Upcoming</h4>
<ul><li>Automatisierte Paralellisierung WIP</li>
<li>Module thematisch umstrukturieren WIP</li>
<li>actinia-parallel-plugin und actinia-tiling-plugin fertig stellen</li>
<li>Automatisiertes Starten von Workern</li>
<li>Job Queue per User</li>
<li>Weiterentwicklung der actinia clients </li>
<li>(OGC API processes)</li>
<li>...</li>
</ul>


</div>

</div>


<!-- THE END #######################################################################-->
<div id="overview" class="step" data-x="80000" data-y="4000" data-scale="180" style="pointer-events: none;" data-rotate="5">

<h1>Vielen Dank!</h1>
<h1>Fragen?</h1>
</div>

</div>
</div>

<div id="impress-toolbar"></div>
<div id="impress-help"></div>

<script type="text/javascript" src="resources/extras/highlight/highlight.pack.js"></script>
<script type="text/javascript" src="resources/extras/mermaid/mermaid.min.js"></script>
<script type="text/javascript" src="resources/extras/markdown/markdown.js"></script>
<script type="text/javascript" src="js/impress.js"></script>
<script>impress().init();</script>
</body>
</html>


<!-- <li><a href="https://github.com/actinia-org/actinia-jupyter/">actinia-jupyter</a></li>
<li><a href="https://github.com/actinia-org/actinia-python-client/">actinia-python-client</a></li>
<li><a href="https://github.com/actinia-org/ace/">ace</a></li>
<li><a href="https://github.com/actinia-org/helm-charts/tree/main/charts">helm charts</a></li>
<li><a href="https://github.com/Open-EO/openeo-grassgis-driver">openeo-grassgis-drives</a></li>
 -->
